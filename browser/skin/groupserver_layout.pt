<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  metal:define-macro="page">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <metal:block define-slot="title" />    
    
    <script type="text/javascript" 
      src="/Presentation/Tofu/XForms/js/xforms.js"></script>
    <metal:block define-slot="javascript" />
    
    <link rel="stylesheet" type="text/css" 
      href="/Presentation/Tofu/Common/css/globalstyle.css"/>
    <link rel="stylesheet" type="text/css" media="print"
      href="/Presentation/Tofu/Common/css/print.css"/>
    
    <metal:block define-slot="style" />
    
    <base tal:attributes="href string:${request/URL1}/" />
  </head>
  <body
    tal:define="site context/Scripts/get/division_object;
    siteName python:context.Scripts.get.option('siteName') or (site and site.title_or_id())"
    tal:attributes="id python:request.URLPATH1.strip('/').replace('/','_');">
    <form method="post" action="" 
      enctype="application/x-www-form-urlencoded"
      onkeypress="javascript:return keypressEventHandler(this, event)">
      
      <div class="xforms_model">
        <!-- The site-search model -->
        <input type="hidden" name="__submit__" value=""/>
        <input type="hidden" name="__models__" value="sitesearch"/>
        <input type="hidden" name="__instance+sitesearch+query" value=""/>
        <input type="hidden" name="__submission_action+sitesearch+search" 
          value="search_all.xml"/>
        <input type="hidden" name="__submission_method+sitesearch+search"
          value="get"/>
        <!-- The page-specific models -->
        <metal:block define-slot="xform_models"/>
      </div>
      
      <div id="toparea">
        <div id="externalbar" 
          metal:define-slot="externallinks"
          tal:content="structure python:getattr(context, 'menuexternal.xml', getattr(context.Templates.output, 'menuexternal.xml'))(method='html')" />
        <div id="titlebar">
          <span class="logo"></span>
          <span class="group"></span>
          <span class="division" tal:content="siteName">Site Name</span>
        </div><!--titlebar-->
        <div id="utilities">
          <div id="utilitylinks" 
            tal:content="structure python:getattr(context.Templates.output, 'utilitylinks.xml')(method='html')">
          </div>
        </div><!--utilities-->
        <div id="sitenavigation" metal:define-slot="sitenavigation"
          tal:content="structure python:getattr(context, 'menumain.xml', getattr(context.Templates.output, 'menumain.xml'))(method='html')" />
      </div><!--toparea-->
      
      <!-- Site Search -->
      <div id="searcharea">
        <h3>Site Search</h3>
        <input type="text" class="text" name="sitesearch+query"/>
        <input type="submit" name="__submit+sitesearch+search" 
          onclick="submitButtonHandler(this)" value="Go" class="button"/>
      </div>
      
      <metal:block metal:define-slot="contextnavigation"
        tal:content="structure python:getattr(context, 'contextmenu.xml', getattr(context.Templates.output, 'contextmenu.xml'))(method='html')" />
      
      <div id="content">
        <div class="breadcrumb" metal:define-slot="breadcrumb"
          tal:content="structure python:getattr(context.Templates.output, 'context.xml')(method='html')"/>
        
        <metal:block metal:define-slot="pagetitle"/>
        
      <metal:block define-slot="body" />   
      </div><!--content-->
      <div class="noFloat"/>
      <metal:block metal:define-slot="footer"
        tal:content="structure python:getattr(context, 'footerlinks.xml', getattr(context.Templates.output, 'footerlinks.xml'))(method='html')" />
    </form>
  </body>
</html>
